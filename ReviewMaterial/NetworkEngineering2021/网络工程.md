#课程笔记
# OSI安全结构
## 安全机制
安全结构的核心
## 安全攻击
任何危及信息系统安全的行为，分为主动攻击和被动攻击
### 主动攻击
影响服务。改变数据，可能造成系统损坏
假冒、重放、改写、拒绝服务
### 被动攻击
不影响服务。不会改变数据，难以检测，容易防御
窃听
## 安全服务
认证、访问控制、数据机密性、数据完整性、不可否认性、可用性服务

# 网络安全模型
![[网络安全模型.png]]
# 网络访问控制模型
看门人功能、内部控制程序

# 密码加密学
## 对称加密
对称加密的前提是秘钥不泄露
## 非对称加密

# 公钥系统加密
加密/解密
数字签名
密钥交换

公钥基于数学函数而非替代和置换

公钥的要求
1. 接收方生成密钥相对容易
2. 发送方加密容易，接收方解密容易
3. 通过公钥推算私钥不可行
4. 知道公钥和密文，计算明文不可行
5. 可以用公钥加密解密私钥，用私钥加密解密公钥

RSA加密
Diffie-Hellman密钥交换
# 消息认证
认证保证数据集合是真是、完整，来源合法
作用：确认消息源、确认消息内容无法修改、确认消息序列正确
方法：基于对称加密、无加密

# 秘钥分发及安全协议
对称加解密->抗密性
公钥加解密->加密对称密钥（专属信道）、数字签名：证明发送者身份
摘要求解（安全Hash->对比）：保证身份安全性和时间安全性

# 数字签名与身份认证
实现密钥交换/分发：对称密钥的协商与公钥的分发
过程：（一个图片）

# 公钥的隐患
中间人攻击
解决方案：公钥证书（可信第三方认证CA）

# 双向认证与单向认证



# 路由表项
* 目标网络地址
* 目标网络子网掩码
* 指向目标的方向
	* 路由器的直连目标网络
	* 指向直连网络内的另一台路由器地址
	* 本地路由器的送出接口
路由表的来源
* 直连路由
* 静态路由：管理员手工建立
* 动态路由：管理员配置路由选择协议以后，通过路由协议获得
# 路由管理距离
管理距离是衡量路由信息来源可靠性的指标，可以用来决定选择采用哪个IP路由协议，范围0~255。
管理距离值越低，学到的路由越可信
* 静态配置路由优先于动态路由协议学到的路由
* 采用复杂量度的路由协议优先于简单量度的路由协议
# 路由的度量尺度
* 跳数
* 可信度
* 延迟
* 带宽
* 负载
* 通信代价
* 最大传输单元
# 路由决策顺序
* 最长匹配
* 管理距离越小越可信
* 管理距离相同比较度量值
* 度量值一样，可以选中多个路径
* 无匹配，选默认路由
* 无默认路由，丢弃
# 路由分类
* 直连路由/非直连
* 静态/非静态
* 动态
* 浮动路由
# 静态路由描述转发路径
* 送出接口
* 指向下一跳路由器直连接口的IP地址
* 指向下一跳路由器直连接口的IP地址+送出接口

# 内部网关和外部网关
* 自治系统
* 外部网关协议EGP
* 内部网关协议IGP
# 路由协议的分类
* 距离矢量路由协议
	* 向邻居发送路由信息
	* 定时更新路由信息
	* 将本机全部路由信息作为更新信息
* 链路状态路由协议
	* 向全网扩散链路状态信息
	* 当网络状态发生变化立即发送更新信息
	* 只发送需要更新的信息
# 距离矢量路由RIP
基于UDP 520端口的应用层协议
依照**传言**进行路由选择协议(容易产生路由环路)
通用属性：路由器通过广播整个路由表，定期向所有邻居发送路由更新信息
* 定期更新
* 邻居更新
* 广播更新
* 全路由表更新
路由表更新：定时更新（更新计时器，每隔预定时间向邻居发送路由表；无效计时器，如果一定时间内未收到该路由更新则标记为不可达；刷新计时器，刷新时间内未接到更新则删除，接收到则更新计时器）
Hold-down倒计时
# 主网边界
在边界路由器上的路由汇总。处在两个主网络边界上的路由器不会把其中一个主网络的子网通告给另一个主网。
边界汇总
主网内子网的掩码必须一致
子网不能被其他主类网络隔开
RIPv1和v2的区别
# 链路状态路由协议
运行链路状态路由协议的路由器向域内所有路由器发出通向其相邻路由器的链路状态信息
链路状态是指与路由器直连的网络的状态，包括**网络、网络类型、相邻路由器信息以及开销**等
每台路由器都会收到域内其他路由器链路状态信息，因此可以自行创建网络拓扑图并计算通向每个网络的最短路径
OSPF度量
Hello数据包：用于发现邻居并与所发现的邻居建立和维护邻接关系
# OSPF协议的过程

# 链路状态路由协议步骤
1. 了解直连网络
2. 向邻居发送Hello数据包，建立邻居关系
3. 建立链路状态数据包
4. 将两路状态数据包泛洪给其他路由器
5. 构建链路状态数据库
6. SPF算法计算生成路由表
局限性
1. 必要的数据库，需要更多内存
2. 运行SPF算法需要更大处理能力
3. 网络初期LSA的泛洪会占用大量带宽
# OSPF层次式设计
区域
区域ID
骨干区域和非骨干区域

# 区域划分的好处
减小了路由器链路状态数据库，缩短了SPF算法的计算时间，缩短了OSPF的收敛时间
2
3

# OSPF协议网络类型
点对点网络
广播多路访问网络
非广播多路访问网络
点对多点网络
虚链路

# 网络协议及模型
## OSI模型分层
每层的交换数据单位

# 计算机网络的三个要素
网络服务、传输媒介、协议（规则）

# 网络设备硬件
机箱：总线BUS
引擎：计算机主机，包括处理器、主存、IO模块、总线
IO模块：
ASIC芯片或者FPGA
ASIC芯片：专用集成电路，强化数据帧转发的处理流程
FPGA：半定制电路，解决定制电路的不足，克服了可编程器件门电路有限的缺点，工作时要对片内RAM进行编程
转线的能力达到传输速率的最大传输

# 操作系统
路由与交换设备：一般来源于BSD操作系统；Shell解释器根据特定指令集进行重新编写
网络安全设备：嵌入式Linux操作系统

# 网络分层
接入层：最终用户被允许可以接入网络的点，代表功能：交换——依靠MAC转发数据帧、虚拟局域网络划分（VLAN：逻辑隔离广播数据帧的方法）
汇接层：两层之间的连接设备，对数据包进行处理操作——过滤和策略路由。承担任务：虚拟局域网之间的路由（VLAN间路由）、介质和传输协议间的转换、对数据包根据IP地址和端口进行安全性过滤、基于IP地址数据包转发（路由）
核心层：尽可能快地交换数据帧或者路由数据包。主要功能：提供交换区块间的连接和到其他区块的访问、承担整个网络的动态路由任务
# 构建区块网络设计方法
## 园区网元素（通信子网设计元素）
### 交换区块
1-2台汇接层交换机、多个接入层交换机组成
传统思想：汇接层设备是所有接入层的集中连接点
现代思想：不设置接入层，由汇接层伸出光纤连接光纤分光器，分光器的80个波道分别连接不同的房间
其大小取决于：
* 不同数据流类型和模式
* 汇接层的3层交换能力综合
* 每台接入层交换机的用户数
* 子网需要在网络内跨越地理位置的程度
主要因素：
* 数据流类型和用户上网行为
* 连接用户计算机的总数量
### 核心区块
必要性：当有两个或者更多交换区块时，需要核心区块
* 负责传输穿过园区的数据流，不进行任何处理器密集型操作
* 必须尽可能快地在区块间传输数据流
* 承担整个网络的动态路由
核心区块设备划分：主核心层设备和从核心层设备
主核心层设备（一般为DR）：连接WAN区块、连接多个服务区块、承担路由协议的DR角色
其他核心层交换机（至少一台DR）：不需要连接WAN区块，不需要连接服务区块

核心交换机与核心路由器对比
* 转发速率：核心交换机远大于核心路由
* 接口类型：核心交换机使用ACSI芯片，限制了网络类型；核心路由器不采用ACSI芯片，利于多种网络协议类型的接入
* 网络管理：核心交换机有限度的支持；核心路由器充分的网络管理与监控支持
### 广域网区块（现多为Internet区块）
作用：
1. 连接互联网络
2. 连接其他自治系统网络
3. 进行NAT地址转换
4. 过滤数据包
构成：由防火墙与出口路由器构成


## 起作用的变量
服务器区块：存放服务器，提供网络服务的区域
* DMZ区域（非军事区），由防火墙构成。其作用是互联网用户与内网用户共同访问的区域。
* 对内服务区，由直连至主核心层的设备构成。其作用是内网用户访问的服务提供区域。
大型机区块：放置大型机的区域

基本核心层设计——双核心
当存在两个或者更多交换区块且需要冗余连接时，设置双核心
可以负载均衡网络流量

环状核心设计
三台以上核心设备构成环状网络

网状结构设计
核心层接口均为路由接口
优点：使设备间两两连接，最大限度保证稳定性和连续性
缺点：光纤布放成本较高、路由信息广播流量较大

动态路由协议支持
环状结构和网状结构设计
可提供最佳的动态路由协议支持
最有利于实现流量的负载均衡

# 综合布线
综合布线是一个信息传输通道，将各种传输设备彼此相连，也能使这些设备与外部通信网相连接
一般采用星型拓扑结构，可将其划分为六个部分：“一间、二区、三个子系统”（设备间、工作区、管理区、水平子系统、干线子系统、建筑群干线子系统）

设备间：适合放置综合布线线缆和相关连接硬件及其应用系统的设备的场所，为了便于搬运一般位于大楼的第二层或者第三层，恒温恒湿无粉尘
工作区：放置应用系统终端设备的区域，由终端设备连接到信息插座的连接（插接软线）组成
管理区：又称电信间（TR），指建筑物中用于端接水平电缆和干线电缆的地方，即指配线间或者设备间的配线区域。最重要设备：配线架
水平子系统：
垂直子系统：由设备间和楼层配线间之间的连接线缆组成，采用大对数双绞电缆或光缆，两端分别接在设备间和楼层配线间
建筑群干线子系统：建筑群由两个以上的建筑物组成；综合布线的建筑群干线子系统

## 特点与选型原则
兼容性

开放性

灵活性

可靠性

先进性

经济性

选择一致性，高性能的综合布线材料
总体规划、分布实施，水平布线尽量到位

# 综合布线的设计等级
基本型

增强型

综合型

# 综合布线的拓扑结构
## 基本星型拓扑结构
以一个建筑物配线架BD为中心，配置若干个楼层配线架FD，每个楼层配线架FD连接若干个通信出口TO
有较好的对等均衡的网络流量分配
## 分层星型网络结构
以某个建筑群配线架CD为中心
* 以若干建筑物架BD为中间层
* 相应的有再下层的楼层配线架和水平子系统，构成多级的星型网络拓扑结构
其综合布线的建设规模较大，网络结构也较复杂
## 分散交叉星型网络结构
为了提高通信传输的安全可靠性
各相邻的信息插座出口分别连接至不同的楼层配线架中

# 综合布线设计技术
## 工作区子系统设计
组成：终端设备、连接到水平子系统信息插座的接插软线

## 水平子系统布线设计方法
直接埋管
先走吊顶内线槽再走支管
地面线槽方式
模压电缆管道布线法